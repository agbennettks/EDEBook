<html>
<head>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css" />
<script type="text/javascript" charset="UTF-8" src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
<script type="text/javascript" src="cparser.js"></script>
</head>

<body>
<a href="../index.html">Table of Contents</a>
<hr />
<center>
<h3>Graphing a Complex Function</h3>
<div id="box" class="jxgbox" style="width:500px; height:500px;"></div>

<script>

var pts=[];
var ptcoords=[];
var col=[];
var topview=false;
var z=[];
var zabs,zhue;
var zmin=0;
var zmax=0;
var xc,yc;
var board;
var compfct=cparser.makefct("z^2");
var initialized=false;
var cftemp;

updategraph();

function updategraph() {
  if (initialized) {
    cftemp=cparser.makefct(document.getElementById('fz').value);
    if ((typeof cftemp)==="string") {
      document.getElementById('emsg').innerHTML=cftemp;
      return false;
    } else {
      document.getElementById('emsg').innerHTML=' ';
      compfct=cftemp;
    }
  }
  initialized=true;
  zmax=0;
  for (var i=0;i<41;i++) {
    ptcoords[i]=[];
    col[i]=[];
    for (var j=0;j<41;j++) {
      xc=0.1*i-2;
      yc=0.1*j-2;
      z=compfct([[xc,yc]]);
      zabs=Math.sqrt(z[0]*z[0]+z[1]*z[1]);
      if (zabs>zmax) { zmax=zabs; }
      ptcoords[i][j]=[xc,yc,zabs];
      midx=0.1*i-1.95;
      midy=0.1*j-1.95;
      z=compfct([[midx,midy]]);
      zhue=Math.round(180*Math.atan2(z[1],z[0])/Math.PI)+180;
      col[i][j]=JXG.hsv2rgb(zhue,1,1);
    }
  }

  // Clear Old Board (if there is one)  
  if (!(board===undefined)) {
    JXG.JSXGraph.freeBoard(board);
  }
  board = JXG.JSXGraph.initBoard('box', 
          {originX: 250, originY: 250, unitX: 50, unitY: 50, axis:false});

  if (topview) {
    board.create('text',[-0.3,-4.2,'Re(z)'],{fontSize:16});
    board.create('text',[-4,-4.2,'-2'],{fontSize:16});
    board.create('text',[3.85,-4.2,'2'],{fontSize:16});
    board.create('text',[4.1,0,'Im(z)'],{fontSize:16});
    board.create('text',[4.1,-3.85,'-2'],{fontSize:16});
    board.create('text',[4.1,3.85,2],{fontSize:16});
    // Create graph
    for (var i=0;i<41;i++) {
      pts[i]=[];
      for (var j=0;j<41;j++) {
        pts[i][j]=board.create('point',[-4.0+i/5.0,-4.0+j/5.0],{visible:false});
      }
    }
    for (var i=0;i<40;i++) {
      for (var j=0;j<40;j++) {
        board.create('polygon',
                     [pts[i][j],pts[i][j+1],pts[i+1][j+1],pts[i+1][j]],
                      {fillColor:col[i][j],fillOpacity:1,
                       withLines:false,highlight:false});
      }
    }

  } else { // side view
    var zmaxstr;
    if (zmax>1000) {
      zmaxstr=zmax.toExponential(1);
    } else if (zmax>100) {
      zmaxstr=zmax.toFixed(0);
    } else if (zmax>1) {
      zmaxstr=zmax.toFixed(1);
    } else if (zmax>0.009) {
      zmaxstr=zmax.toFixed(2);
    } else {
      zmaxstr=zmax.toExponential(1);
    }
    board.create('text',[3.7,4.2,zmaxstr],{fontSize:16});
    board.create('text',[3.7,2,'|f(z)|'],{fontSize:16});
    board.create('text',[3.72,-0.05,'0'],{fontSize:16});
    board.create('text',[-1,-4.2,'Re(z)'],{fontSize:16});
    board.create('text',[-4.4,-4.2,'-2'],{fontSize:16});
    board.create('text',[2.45,-4.2,'2'],{fontSize:16});
    board.create('text',[3.2,-2.1,'Im(z)'],{fontSize:16});
    board.create('text',[2.7,-3.8,'-2'],{fontSize:16});
    board.create('text',[3.6,-0.5,'2'],{fontSize:16});

    var bul,bur,bbl,bbr,ful,fur,fbl,fbr;
    bul=board.create('point',[-3.2,4.3],{visible:false});  
    bur=board.create('point',[3.6,4.3],{visible:false});
    bbl=board.create('point',[-3.2,-0.3],{visible:false});
    bbr=board.create('point',[3.6,-0.3],{visible:false});
    ful=board.create('point',[-4.4,1.1],{visible:false});
    fur=board.create('point',[2.6,1.1],{visible:false});
    fbl=board.create('point',[-4.4,-3.9],{visible:false});
    fbr=board.create('point',[2.6,-3.9],{visible:false});
    board.create('segment',[bul,bur],
                   {strokeColor:'black',strokeWidth:1,highlight:false});
    board.create('segment',[bur,bbr],
                   {strokeColor:'black',strokeWidth:1,highlight:false});
    board.create('segment',[bbr,fbr],
                   {strokeColor:'black',strokeWidth:1,highlight:false});
    board.create('segment',[ful,fur],
                   {strokeColor:'black',strokeWidth:1,highlight:false});
    board.create('segment',[ful,fbl],
                   {strokeColor:'black',strokeWidth:1,highlight:false});
    board.create('segment',[fur,fbr],
                   {strokeColor:'black',strokeWidth:1,highlight:false});
    board.create('segment',[fbl,fbr],
                   {strokeColor:'black',strokeWidth:1,highlight:false});
    board.create('segment',[bul,ful],
                   {strokeColor:'black',strokeWidth:1,highlight:false});
    board.create('segment',[bur,fur],
                   {strokeColor:'black',strokeWidth:1,highlight:false});
    board.create('polygon',[bbl,bbr,fbr,fbl],
                   {fillColor:'gray',withLines:false,highlight:false});

    // Create Graph
    for (var i=0;i<41;i++) {
      pts[i]=[];
      for (var j=0;j<41;j++) {
        pts[i][j]=board.create('point',coord2scr(ptcoords[i][j]),
                               {visible:false});
      }
    }
    for (var j=39;j>-1;j--) {
      for (var i=0;i<40;i++) {
        board.create('polygon',
             [pts[i][j],pts[i][j+1],pts[i+1][j+1],pts[i+1][j]],
             {fillColor:col[i][j],fillOpacity:1,
              withLines:false,highlight:false});
      }
    }
  }
}

function coord2scr(coords) {
  var scr=[];
  scr[0]=-0.35+0.275*coords[1]+1.725*coords[0]-0.0125*coords[0]*coords[1];
  scr[1]=-2.1+0.9*coords[1]+(4.8-0.1*coords[1])*coords[2]/zmax;
  return scr;
}

/*
function compfct(x) {
  var zr,zi;
  zr=x[0]*x[0]-x[1]*x[1];
  zi=2*x[0]*x[1];
//  zr=Math.exp(Math.PI*x[0])*Math.cos(Math.PI*x[1]);
//  zi=Math.exp(Math.PI*x[0])*Math.sin(Math.PI*x[1]);
  return [zr,zi];
}
*/

</script>
<table>
<tr>
<td><span id='emsg' style='color:red'> </span</td>
</tr>
<tr>
<td>
<form onsubmit='updategraph(); return false;'>
f(z) = <input type=text id='fz' value='z^2' size=60>
</form>
</td>
<td valign=top>
<input type=button value='Side View' 
 onclick='topview=false; updategraph();'>
</td>
<td valign=top>
<input type=button value='Top View' 
 onclick='topview=true; updategraph();'>
</td>
</tr>
</table>
</center>
<p />
<h4>Instructions</h4>
Enter complex functions into the f(z) = text box using standard calculator
notation. Note that complex functions are usually written as functions
of z, and the applet requires you enter the function in terms of a
variable z. You can use implied multiplication such as 2z without a *. If 
you use implied multiplication between two alphabetic entities, e.g. 
zsin(piz), the system does pretty well at recognizing you meant 
z*sin(pi*z). You can help make sure the system interprets things 
correctly by using spaces, e.g. 
z&nbsp;sin(pi&nbsp;z), or entering an explicit multiplication sign *. 
Functions
must have parentheses, i.e. sin(z) not sin z. The parser understands the
following operations, functions, and constants: +, -, *, /, ^,
sqrt(),
sin(), cos(), tan(), exp(), ln(), log() (synonymous with ln),
sinh(), cosh(), abs(), mod() (synonymous with abs), arg(), conj(), e, pi,
i.
<p />
The app shows the graph of the complex function with the domain plotted 
along the base plane, the modulus of the range plotted along the z-axis, 
and the argument indicated by the color according to the color wheel drawn 
below. This represents the 4-dimensional complex graph as a colored 
3-dimension graph. If you select the Side View the 3d graph is plotted on 
the 2d screen using a standard projection. If you choose the Top View you 
will only be shown the color for each point and not the height in a 2d 
plot.
<center>
<img align=center src=colormap.png height=437 width=460>
</center>
<hr />
&copy;1994-2026 Andrew G. Bennett
</body>
</html>
